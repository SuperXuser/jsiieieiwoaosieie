-- ================= ðŸ”¥ HOODHELLER PREMIUM LOADER =================
local ApiUrl = "https://hoodheller.vercel.app"

-- Generate unique nonce
local function generateNonce()
    return tostring(os.time()) .. "_" .. math.random(100000, 999999)
end

-- Get executor name
local function getExecutor()
    local executors = {
        "Synapse", "Krnl", "Scriptware", "Fluxus", "Electron", 
        "Celery", "Valyse", "Trigon", "Oxygen", "Evon", "Delta",
        "Xeno", "Solara", "Arceus", "Hydrogen", "Sentinel"
    }
    
    for _, exe in ipairs(executors) do
        if identifyexecutor and identifyexecutor():lower():find(exe:lower()) then
            return exe
        end
    end
    return "Premium"
end

-- Get token
local function getToken(userId)
    local success, response = pcall(function()
        return request({
            Url = ApiUrl .. "/get-token",
            Method = "POST",
            Headers = { 
                ["Content-Type"] = "application/json",
                ["User-Agent"] = getExecutor() .. " Premium/2.0"
            },
            Body = game:GetService("HttpService"):JSONEncode({
                robloxUserId = userId
            })
        })
    end)
    
    if success and response and response.StatusCode == 200 then
        local data = game:GetService("HttpService"):JSONDecode(response.Body)
        return data.token
    end
    return nil
end

-- Load premium script
local function loadPremium()
    local player = game:GetService("Players").LocalPlayer
    local userId = player.UserId
    local executor = getExecutor()
    
    -- Get token
    local token = getToken(userId)
    if not token then
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "HoodHeller",
            Text = "Failed to authenticate!",
            Duration = 3
        })
        return
    end
    
    -- Load script
    local requestData = {
        robloxUserId = userId,
        nonce = generateNonce(),
        executor = executor,
        placeId = game.PlaceId,
        timestamp = os.time() * 1000
    }
    
    local success, response = pcall(function()
        return request({
            Url = ApiUrl .. "/load",
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json",
                ["Authorization"] = "Bearer " .. token,
                ["User-Agent"] = executor .. " Premium/2.0"
            },
            Body = game:GetService("HttpService"):JSONEncode(requestData)
        })
    end)
    
    if success and response and response.StatusCode == 200 then
        loadstring(response.Body)()
        
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "HoodHeller",
            Text = "Premium script loaded!",
            Duration = 2
        })
    else
        game:GetService("StarterGui"):SetCore("SendNotification", {
            Title = "HoodHeller",
            Text = "Failed to load premium!",
            Duration = 3
        })
    end
end

-- Execute
loadPremium()